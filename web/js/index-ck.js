var json_data,obj,main_index,editor;$(document).ready(function(){json_data=$.getJSON("json.json",function(){obj=$.parseJSON(json_data.responseText);for(var e=0;e<obj.files.length;e++)obj.files[e].path.indexOf("main")!=-1&&(main_index=e);for(var e=0;e<obj.errors.length;e++){var t="";e==0&&(t="active");var n=obj.errors[e].error,r=obj.errors[e].trace[obj.errors[e].trace.length-1].lineno,i='<li class="errorItem '+t+'" index='+e+'><span aria-hidden="true" data-icon="&#xe000;"></span>'+n+" :: Line "+r+"</li>";$(".errorList").append(i)}for(var e=obj.errors[0].trace.length-1;e>=0;e--)if(obj.errors[0].trace[e].clickable){var s=obj.errors[0].trace[e].filename,o=obj.errors[0].trace[e].function.name+" :: "+obj.errors[0].trace[e].lineno,u='<span aria-hidden=true" data-icon="&#xe008;" class="arrow"></span>';e==0&&(u="");var f=u+'<div class="error notFirst" errorIndex='+0+" traceIndex="+e+'><div class="errorContainer"><div class="title">'+s+'</div><div class="descrip">'+o+'</div></div><div class="errorMenu"><span aria-hidden="true" data-icon="&#xe007;" class="quickLook"></span><span aria-hidden="true" data-icon="&#xe004;" class="mainEdit larger"></span><br></div><div class="miniEditor"></div></div><br>';$(".listOfErrors").append(f)}var l=0;$(".arrow").each(function(e,t){var n=$(this).css("margin-left");n=n.replace("px","");n=parseInt(n)+l;$(this).css("margin-left",n+"px");l+=10});editor=ace.edit("editor");editor.getSession().setMode("ace/mode/c_cpp");editor.setValue(obj.files[main_index].content);editor.gotoLine(1);$("#editor").attr("fileIndex",main_index);$("#editorTitle h2").remove();var c='<h2><span aria-hidden="true" data-icon="&#xe003;"></span>'+obj.files[main_index].path+"</h2>";$("#editorTitle").append(c);setTimeout(function(){for(var e=0;e<obj.errors[0].trace.length;e++){a=parseInt(obj.errors[0].trace[e].lineno);a&&$(".ace_line").each(function(e,t){e+1==a&&$(this).attr("style","background-color: rgba(255,0,0, 0.5) !important;")})}},1e3);editor.getSession().on("change",function(e){var t=parseInt($("#editor").attr("fileIndex"));obj.files[t].content=editor.getValue()})});$(document).on("click",".errorItem",function(){var e=parseInt($(this).attr("index"));$(".errorItem").parent().find(".active").removeClass("active");$(this).addClass("active");$(".listOfErrors").animate({opacity:"0",marginTop:"-10px"},300,"easeOutQuad",function(){$(this).children().remove();for(var t=obj.errors[e].trace.length-1;t>=0;t--)if(obj.errors[e].trace[t].clickable){var n=obj.errors[e].trace[t].filename,r=obj.errors[e].trace[t].function.name+" :: "+obj.errors[e].trace[t].lineno,i='<span aria-hidden=true" data-icon="&#xe008;" class="arrow"></span>';t==0&&(i="");var s=i+'<div class="error notFirst" errorIndex='+e+" traceIndex="+t+'><div class="errorContainer"><div class="title">'+n+'</div><div class="descrip">'+r+'</div></div><div class="errorMenu"><span aria-hidden="true" data-icon="&#xe007;" class="quickLook"></span><span aria-hidden="true" data-icon="&#xe004;" class="mainEdit larger"></span><br></div><div class="miniEditor"></div></div><br>';$(".listOfErrors").append(s)}var o=0;$(".arrow").each(function(e,t){var n=$(this).css("margin-left");n=n.replace("px","");n=parseInt(n)+o;$(this).css("margin-left",n+"px");o+=10});$(".listOfErrors").animate({opacity:"1",marginTop:"0px"},300,"easeInQuad")})});$(document).on("click",".quickLook",function(){$("#miniEditor").removeAttr("id");$(this).parent().siblings(".miniEditor").attr("id","miniEditor");if($(this).attr("data-quicklooked")!="1"){$(this).attr("data-quicklooked","1");$(this).parent().siblings(".miniEditor").attr("id","miniEditor");var e=ace.edit("miniEditor"),t=$(this).parent().parent().attr("errorIndex"),n=$(this).parent().parent().attr("traceIndex");e.getSession().setMode("ace/mode/c_cpp");e.setReadOnly(!0);e.setValue(obj.errors[t].trace[n].function.text);$(this).animate({color:"#000"},300);$("#miniEditor").animate({height:"200px"},300,function(){e.resize();e.focus()});quickLooked=1}else{$(this).animate({color:"#777"},300);$("#miniEditor").animate({height:"0px"},300,function(){$(this).removeAttr("id");delete e});$(this).attr("data-quicklooked","0")}});$(document).on("click",".mainEdit",function(){var e=$(this).parent().parent().attr("errorIndex"),t=$(this).parent().parent().attr("traceIndex"),n=main_index;for(var r=0;r<obj.files.length;r++)obj.files[r].path.indexOf(obj.errors[e].trace[t].filename)!=-1&&(n=r);editor.setValue(obj.files[n].content);editor.gotoLine(1);$("#editorTitle h2").remove();var i='<h2><span aria-hidden="true" data-icon="&#xe003;"></span>'+obj.files[n].path+"</h2>";$("#editorTitle").append(i);setTimeout(function(){for(var e=0;e<obj.errors[n].trace.length;e++){a=parseInt(obj.errors[n].trace[e].lineno);a&&$(".ace_line").each(function(e,t){e+1==a&&$(this).attr("style","background-color: rgba(255,0,0, 0.5) !important;")})}},1e3);$("#editor").attr("fileIndex",n)});$(document).on("click",".submit",function(){var e=parseInt($("#editor").attr("fileIndex"));obj.files[e].content=editor.getValue();console.log("Going in now");$.ajax({type:"POST",url:"json.php",dataType:"json",data:{json:obj}},function(){alert("success!")})})});